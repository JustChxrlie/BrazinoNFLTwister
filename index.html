<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Login / Registro</title>

<style>
body {
  font-family: system-ui, sans-serif;
  background: linear-gradient(135deg, #6366f1, #4338ca);
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
}

.card {
  background: white;
  padding: 28px;
  width: 100%;
  max-width: 360px;
  border-radius: 18px;
  box-shadow: 0 20px 40px rgba(0,0,0,.25);
  text-align: center;
}

h2 { margin-bottom: 20px; }

.field {
  margin-bottom: 15px;
  text-align: left;
}

label {
  font-size: 13px;
  color: #555;
}

input {
  width: 100%;
  padding: 14px;
  border-radius: 10px;
  border: 1px solid #ccc;
  margin-top: 6px;
  font-size: 16px; /* üî• evita zoom en iOS */
}


.buttons {
  display: flex;
  gap: 10px;
  margin-top: 15px;
}

button {
  flex: 1;
  padding: 14px;
  border-radius: 10px;
  border: none;
  cursor: pointer;
  font-size: 15px;
  font-weight: 600;
}
  
button:active {
  transform: scale(0.97);
}

.register { background: #22c55e; color: white; }
.login { background: #6366f1; color: white; }

#msg {
  margin-top: 15px;
  font-size: 14px;
  min-height: 20px;
}

@media (max-width: 480px) {

  body {
    padding: 20px;
  }

  .card {
    padding: 24px;
  }

  h2 {
    font-size: 22px;
  }

  .buttons {
    flex-direction: column;
  }

  button {
    width: 100%;
  }
}
#msg {
  margin-top: 18px;
  font-size: 14px;
  min-height: 20px;
  font-weight: 500;
}

</style>
</head>

<body>

<div class="card">
  <h2>Brazi√±o üèà</h2>

  <div class="field">
    <label>Usuario</label>
    <input id="user" placeholder="Usuario">
  </div>

  <div class="field">
    <label>Password</label>
    <input id="pass" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
  </div>

  <div class="buttons">
    <button class="register" onclick="register()">Crear cuenta</button>
    <button class="login" onclick="login()">Iniciar Sesion</button>
  </div>

  <div id="msg"></div>
</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbzGMm2P_R2IE6dTD3au5CyuLV-1U41uzRukMWdgynLb6EAjLKmiss3crH7gIxq-eIj3xg/exec";
const msg = document.getElementById("msg");

function setMsg(text, color="#333") {
  msg.textContent = text;
  msg.style.color = color;
}

function register() {
  const usuario = document.getElementById("user").value.trim();
  const password = document.getElementById("pass").value.trim();

  if (!usuario || !password)
    return setMsg("Completa todos los campos", "red");

  const form = new URLSearchParams({
    action: "register",
    usuario,
    password
  });

  fetch(API_URL, { method: "POST", body: form })
    .then(r => r.json())
    .then(d => {
      if (!d.ok) return setMsg(d.message, "red");
      setMsg("Cuenta creada üéâ, puedes iniciar sesion", "green");
    })
    .catch(() => setMsg("Error de conexi√≥n", "red"));
}

function login() {
  const usuario = document.getElementById("user").value.trim();
  const password = document.getElementById("pass").value.trim();

  if (!usuario || !password)
    return setMsg("Completa todos los campos", "red");

  const form = new URLSearchParams({
    action: "login",
    usuario,
    password
  });

  fetch(API_URL, { method: "POST", body: form })
    .then(r => r.json())
    .then(d => {
      if (!d.ok) return setMsg(d.message, "red");

      localStorage.setItem("usuario", d.usuario);
      localStorage.setItem("dinero", d.dinero);
      localStorage.setItem("rol", d.rol);

      window.location.href = "dashboard.html";
    })
    .catch(() => setMsg("Error de conexi√≥n", "red"));
}
</script>

</body>
</html>
